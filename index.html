<!doctype html>
<html lang="hu">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>49. sz√ºlinapi meglepet√©s ‚Äî Csak Neked</title>
  <style>
    :root {
      --bg: #0f0715;
      --card: #1c0d2a;
      --accent: #d94a8f;
      --accent-light: #ff96c8;
      --text: #e6d9f0;
      --shadow: rgba(0,0,0,0.3);
    }
    html, body {
      height: 100%;
      margin: 0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      background: var(--bg);
      color: var(--text);
      overflow-x: hidden;
    }
    .wrap {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 2rem;
      background: radial-gradient(circle at 50% 30%, rgba(217, 74, 143, 0.15), transparent 50%),
                  radial-gradient(circle at 70% 80%, rgba(255, 150, 200, 0.1), transparent 60%);
    }
    .stage {
      width: 760px;
      max-width: 96vw;
      text-align: center;
    }
    .card {
      background: linear-gradient(180deg, var(--card), #2a143f);
      padding: 2.4rem 2rem;
      border-radius: 16px;
      box-shadow: 0 16px 48px var(--shadow);
      border: 1px solid rgba(217, 74, 143, 0.3);
    }
    h1 {
      margin: 0 0 .25rem;
      color: var(--accent-light);
      font-size: 2.2rem;
      font-weight: 700;
      letter-spacing: -0.02em;
    }
    p.lead {
      margin: .25rem 0 1.2rem;
      color: #b8a8c9;
      font-size: 1.1rem;
    }
    .box-wrap {
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 1.5rem 0 2rem;
    }
    .box {
      width: 240px;
      height: 180px;
      position: relative;
      transform-style: preserve-3d;
      perspective: 800px;
      cursor: pointer;
      margin: 0 auto;
      outline: none;
    }
    .box-base {
      width: 100%;
      height: 100%;
      background: #9b3b7a;
      border-radius: 10px;
      box-shadow: 0 12px 32px rgba(0,0,0,0.3);
      position: absolute;
      left: 0;
      top: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      transform-origin: 50% 0%;
      transition: transform 800ms cubic-bezier(.2,.9,.3,1);
      backface-visibility: hidden;
      border: 2px solid rgba(255,255,255,0.15);
      user-select: none;
    }
    .box-lid {
      width: 110%;
      height: 30%;
      background: #d94a8f;
      border-radius: 10px 10px 0 0;
      position: absolute;
      left: -5%;
      top: -6%;
      transform-origin: 50% 100%;
      transition: transform 700ms cubic-bezier(.2,.9,.3,1);
      box-shadow: 0 10px 22px rgba(0,0,0,0.25);
      border: 2px solid rgba(255,255,255,0.15);
      user-select: none;
    }
    .box.open .box-lid {
      transform: rotateX(-78deg) translateY(-8px);
    }
    .box.open .box-base {
      transform: translateY(12px) scale(.98);
    }
    .gift-msg {
      opacity: 0;
      transform: translateY(16px) scale(.96);
      transition: opacity 600ms, transform 600ms;
      pointer-events: none;
      font-weight: 600;
      margin-top: 1.2rem;
    }
    .box.open + .gift-msg {
      opacity: 1;
      transform: translateY(0) scale(1);
      pointer-events: auto;
    }
    .voucher {
      margin-top: 1.2rem;
      padding: 1.1rem 1rem;
      border-radius: 12px;
      background: linear-gradient(180deg, #361f4a, #2a143f);
      border: 1px dashed #b869a4;
      color: #e6d9f0;
      font-size: 1.05rem;
      box-shadow: 0 6px 20px rgba(0,0,0,0.25);
    }
    .voucher strong {
      color: var(--accent-light);
    }
    .cta {
      display: inline-block;
      margin-top: 1.2rem;
      padding: .7rem 1.3rem;
      border-radius: 14px;
      background: var(--accent);
      color: white;
      text-decoration: none;
      font-weight: 600;
      box-shadow: 0 6px 16px rgba(217, 74, 143, 0.4);
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .cta:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(217, 74, 143, 0.5);
    }
    footer {
      margin-top: 1.8rem;
      color: #7a6a89;
      font-size: .9rem;
    }
    .small {
      font-size: .95rem;
      color: #a898b8;
      margin-top: .6rem;
    }
    .hidden {
      display: none;
    }
    @media (max-width: 480px) {
      .box {
        width: 190px;
        height: 140px;
      }
      h1 {
        font-size: 1.9rem;
      }
    }
    /* YouTube container ‚Äì keep it tiny */
    #player {
      width: 0;
      height: 0;
      overflow: hidden;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="stage">
      <div class="card" role="main" aria-labelledby="title">
        <h1 id="title">49. sz√ºlinapi meglepet√©s</h1>
        <p class="lead">
          Olyan vagy, mintha 49 helyett 30 lenn√©l‚Ä¶<br>
          De ma √©n vagyok a gy≈ëztes ‚Äì √©s Neked adom a f≈ëd√≠jat.
        </p>

        <div class="box-wrap">
          <div id="box" class="box" role="button" tabindex="0" aria-pressed="false" aria-label="Kattints a dobozra a meglepet√©shez" aria-expanded="false">
            <div class="box-lid" aria-hidden="true"></div>
            <div class="box-base" aria-hidden="true">
              <div style="font-size:2.4rem;color:#fff;font-weight:700;">üéÅ</div>
            </div>
          </div>
        </div>

        <div class="gift-msg" id="giftMsg" aria-live="polite">
          <div class="small">
            <strong>Kattints m√©g egyszer, ha szeretn√©d √∫jra hallani a zen√©t.</strong>
          </div>

          <div class="voucher" id="voucher">
            <div style="font-size:1.3rem;color:var(--accent-light);margin-bottom:.4rem;">
              49 000 Ft
            </div>
            <div>
              <strong>Triumph v√°s√°rl√°si utalv√°ny</strong>
            </div>
            <div style="margin-top:.35rem;">
              <strong>Bev√°lthat√≥ velem egy√ºtt</strong> ‚Äì Polg√°r, 2026.02.02‚Äì2026.02.04 k√∂z√∂tt.
            </div>
            <div style="margin-top:.4rem;color:#b8a8c9;font-size:.95rem;">
              Fejtsd ki magad, v√°laszd ki, mit szeretn√©l viselni rajtam‚Ä¶<br>
              A meglepet√©s csak most kezd≈ëdik.
            </div>
          </div>

          <a class="cta" id="revealAgain" href="#" style="display:inline-block;">
            √öjra lej√°tszom a zen√©t
          </a>
        </div>

        <p class="small">
          Zene: ha a lej√°tsz√°s blokkolva van, haszn√°ld a ‚ÄûYouTube megnyit√°sa‚Äù gombot.
        </p>
        <p class="small">
          <a id="openYT" href="https://www.youtube.com/watch?v=ioE_O7Lm0I4" target="_blank" rel="noopener">
            YouTube megnyit√°sa (Rocky ‚Äì Gonna Fly Now)
          </a>
        </p>

        <footer>¬© 2026 ‚Äî Csak Neked, egyed√ºl.</footer>
      </div>
    </div>
  </div>

  <!-- YouTube IFrame API + hidden player -->
  <div id="player"></div>
  <script>
    // YouTube video ID ‚Äì Rocky Theme
    const YT_ID = 'ioE_O7Lm0I4'; // Bill Conti ‚Äì Gonna Fly Now

    // Load YouTube IFrame API
    (function loadYouTubeAPI(){
      if (!document.querySelector('script[src="https://www.youtube.com/iframe_api"]')) {
        const tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        document.head.appendChild(tag);
      }
    })();

    let player;
    let playerReady = false;

    // This must be global so the API can call it
    function onYouTubeIframeAPIReady() {
      player = new YT.Player('player', {
        height: '0',
        width: '0',
        videoId: YT_ID,
        playerVars: {
          'autoplay': 0,
          'controls': 1,
          'rel': 0,
          'modestbranding': 1,
          'playsinline': 1
        },
        events: {
          'onReady': function() { playerReady = true; },
          'onStateChange': function() { /* noop for now */ }
        }
      });
    }
    window.onYouTubeIframeAPIReady = onYouTubeIframeAPIReady;

    (function(){
      const box = document.getElementById('box');
      const msg = document.getElementById('giftMsg');
      const voucher = document.getElementById('voucher');
      const revealAgain = document.getElementById('revealAgain');
      const openYT = document.getElementById('openYT');

      // open box visually and try to play video
      function openBox() {
        if (!box.classList.contains('open')) {
          box.classList.add('open');
          box.setAttribute('aria-pressed','true');
          box.setAttribute('aria-expanded','true');
          msg.style.pointerEvents = 'auto';

          // Try to play via API if ready
          if (playerReady && player && typeof player.playVideo === 'function') {
            try {
              player.seekTo(0);
              player.playVideo();
              return;
            } catch (err) {
              console.warn('YT play failed (API):', err);
            }
          }

          // If player not ready or play failed, open YouTube in new tab as fallback
          // but only open fallback if the user explicitly clicked (not when keyboard used to focus)
          // We'll attempt to open a small named window (browsers may block popups if not direct user gesture).
          try {
            const win = window.open('https://www.youtube.com/watch?v=' + YT_ID, '_blank', 'noopener');
            if (win) win.focus();
          } catch (err) {
            // silent
          }
        }
      }

      function resetBox(){
        box.classList.remove('open');
        box.setAttribute('aria-pressed','false');
        box.setAttribute('aria-expanded','false');
      }

      // toggle behavior so second click can also close if desired (optional)
      function toggleBox() {
        if (box.classList.contains('open')) {
          // keep open on second click by default ‚Äî but animation / UX: we re-open music
          // here we just replay the music
          if (playerReady && player && typeof player.playVideo === 'function') {
            try {
              player.seekTo(0);
              player.playVideo();
            } catch(err){}
          } else {
            try {
              const win = window.open('https://www.youtube.com/watch?v=' + YT_ID, '_blank', 'noopener');
              if (win) win.focus();
            } catch (err) {}
          }
        } else {
          openBox();
        }
      }

      // Click and keyboard support
      box.addEventListener('click', function (e) {
        e.preventDefault();
        toggleBox();
      }, false);

      box.addEventListener('keydown', function(e){
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          toggleBox();
        } else if (e.key === 'Escape') {
          resetBox();
        }
      });

      // Support touchstart as explicit user gesture on some mobile browsers
      box.addEventListener('touchstart', function(e){
        // don't preventDefault so click still fires on some devices; just ensure the gesture is noticed
      }, {passive: true});

      revealAgain.addEventListener('click', function(e){
        e.preventDefault();
        if (box.classList.contains('open')) {
          // visual pulse
          try {
            voucher.animate([
              {opacity:1, transform:'scale(1)'},
              {opacity:0.9, transform:'scale(1.02)'},
              {opacity:1, transform:'scale(1)'}
            ], {duration:500});
          } catch (err) { /* ignore if animate not supported */ }

          if (playerReady && player && typeof player.playVideo === 'function') {
            try {
              player.seekTo(0);
              player.playVideo();
              return;
            } catch(err){
              console.warn('replay failed (API):', err);
            }
          }

          // fallback: open YT
          try {
            const win = window.open('https://www.youtube.com/watch?v=' + YT_ID, '_blank', 'noopener');
            if (win) win.focus();
          } catch (err) {}
        } else {
          openBox();
        }
      });

      // openYT is just a normal link fallback ‚Äî we don't prevent default
      openYT.addEventListener('click', function(){ /* just a link fallback */ });

    })();
  </script>
</body>
</html>
